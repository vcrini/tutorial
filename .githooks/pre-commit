#!/bin/sh
# Format only staged Go files that still exist in working tree.
STAGED_GO_FILES=$(git diff --cached --name-only --diff-filter=ACMR -- '*.go')

if [ -z "$STAGED_GO_FILES" ]; then
    echo "No Go Files to Update"
    exit 0
fi

for file in $STAGED_GO_FILES; do
    if [ -f "$file" ]; then
        gofmt -w "$file"
        git add "$file"
    fi
done
